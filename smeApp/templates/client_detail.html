{% extends 'dashboard.html' %}
{% load static %}
{% block content %}
<head>
  <link rel="stylesheet" href="{% static 'assets/css/client_detail.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/tailwind.output.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/tailwind.css' %}">
  <style>
      .nav-phoenix-pills .nav-item .nav-link {
        padding-top:0.45rem !important;
        padding-bottom:0.45rem !important;

      }
      .nav-link.active {
        color: black !important;
    }
    hr {
      border: none;
      border-top: 1px solid #ccc;
      height: 1px;
      width: 100%;
      margin-top: 1px !important;
      margin-bottom: 7px;
  }
  .rounded-lg {
      border-radius: 0.5rem;
    }
  card {
        border-radius: 0;
        font-size: 16px;
        line-height: 1.5;
        color: #333;
    }
  .card-body {
      padding: 15px;
  }
  .card .title {
      font-size: 18px;
      color: #333;
      margin-bottom: 5px;
  }
  .card .content {
      font-size: 16px;
      color: #666;
  }
    .card h5 {
      font-size: 17px;
      font-weight: 600;
      color: #009BFT;
      margin-bottom: 10px;
      text-align: left;
  }
  .new-card p, .new-card a{
    font-size: 16px;
    color: #666;
    text-align: left;
    padding-left: 30px;
  }

  .card .icon {
      font-size: 20px;
      color: #007BFF;
      margin-right: 10px;
  }
</style>
</head>

<div class="d-none d-lg-block">
<div class="pb-9">
  <div class="row g-0 g-md-4 g-xl-6">
    <div class="col-md-5 col-lg-5 col-xl-4">
        <div class="flex justify-between" style="margin-left:-1rem; margin-right:-1rem; margin-bottom:1rem;">
        <!-- Card 1 -->
        <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800 mr-2">
          <div class="card-icon p-3 mr-4 text-green-500 bg-green-100 rounded-full dark:text-green-100 dark:bg-green-500">
              <!-- SVG Path -->
              <svg class="w-5 h-5" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511.999 511.999" xml:space="preserve" fill="#000000">
              <g id="SVGRepo_bgCarrier" stroke-width="0"/>
              <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
              <g id="SVGRepo_iconCarrier"> <circle style="fill:#aef4d0;" cx="367.369" cy="161.604" r="84.828"/> <g> <path style="fill:#4191b4;" d="M367.367,260.348c-26.374,0-51.169-10.271-69.818-28.919c-5.429-5.429-5.429-14.233,0-19.664 c5.431-5.428,14.232-5.428,19.664,0c27.656,27.656,72.653,27.656,100.31,0c13.398-13.396,20.774-31.207,20.774-50.154 s-7.377-36.759-20.774-50.154c-27.656-27.656-72.653-27.656-100.31,0c-5.431,5.428-14.232,5.428-19.664,0 c-5.429-5.429-5.429-14.233,0-19.664c18.649-18.648,43.444-28.919,69.818-28.919s51.169,10.271,69.818,28.919 c18.648,18.649,28.919,43.444,28.919,69.818s-10.271,51.169-28.919,69.818C418.537,250.077,393.742,260.348,367.367,260.348z"/> <path style="fill:#4191b4;" d="M374.166,155.225v-24.161c9.644,1.691,11.094,7.037,11.312,10.18 c0.056,0.805,0.72,1.428,1.528,1.428h10.534c0.884,0,1.581-0.748,1.535-1.632c-0.684-13.252-9.766-21.778-24.909-23.692v-8.125 c0-0.847-0.687-1.534-1.534-1.534h-10.532c-0.847,0-1.534,0.687-1.534,1.534v8.125c-15.754,1.992-24.951,11.141-24.951,25.325 s9.195,23.332,24.951,25.325v24.161c-9.644-1.691-11.094-7.037-11.312-10.18c-0.056-0.805-0.72-1.428-1.528-1.428h-10.534 c-0.884,0-1.581,0.748-1.535,1.632c0.684,13.252,9.766,21.778,24.909,23.692v8.125c0,0.847,0.687,1.534,1.534,1.534h10.532 c0.847,0,1.534-0.687,1.534-1.534v-8.125c15.754-1.992,24.951-11.141,24.951-25.325 C399.117,166.366,389.922,157.216,374.166,155.225z M360.567,154.28c-11.348-1.99-11.351-9.04-11.351-11.608 c0-2.567,0.003-9.619,11.351-11.608V154.28z M374.166,192.157v-23.217c11.348,1.99,11.351,9.042,11.351,11.608 S385.515,190.168,374.166,192.157z"/> </g> <path style="fill:#aef4d0;" d="M60.539,186.447c25.596,0,46.346,20.75,46.346,46.346s-20.749,46.346-46.346,46.346 c-25.596,0-46.346-20.75-46.346-46.346S34.943,186.447,60.539,186.447H13.904v248.771h93.272V186.447H60.539z"/> <path style="fill:#4191b4;" d="M461.604,328.968H338.148c0.214-1.806,0.335-3.632,0.335-5.478c0-12.394-4.884-24.036-13.816-32.844 L242.851,211c-12.753-12.372-29.611-19.186-47.472-19.186h-74.302v-5.366c0-7.678-6.226-13.904-13.904-13.904H13.904 C6.226,172.545,0,178.771,0,186.449v248.773c0,7.678,6.226,13.904,13.904,13.904h93.27c7.678,0,13.904-6.226,13.904-13.904v-6.471 l178.819-0.031c7.678-0.001,13.902-6.228,13.901-13.907c-0.001-7.678-6.228-13.902-13.907-13.901l-178.814,0.031V219.622h74.302 c10.591,0,20.574,4.027,28.09,11.319l81.735,79.568c3.527,3.479,5.47,8.088,5.47,12.982c0,4.894-1.941,9.503-5.475,12.988 l-0.1,0.099c-7.412,7.309-19.471,7.308-26.88,0l-86.29-85.096c-5.467-5.393-14.272-5.332-19.663,0.138 c-5.392,5.468-5.331,14.271,0.138,19.663l58.498,57.689H175.61c-7.678,0-13.904,6.226-13.904,13.904s6.226,13.904,13.904,13.904 h81.735c0.563,0,1.114-0.043,1.659-0.108c9.05,8.762,20.848,13.152,32.653,13.15c11.761,0,23.52-4.36,32.559-13.061 c0.122,0.003,0.241,0.018,0.363,0.018h137.023c12.455,0,22.588,9.907,22.588,22.085c0,12.177-10.133,22.084-22.588,22.084h-96.172 c-7.678,0-13.904,6.226-13.904,13.904c0,7.678,6.226,13.904,13.904,13.904h96.172c27.788,0,50.396-22.381,50.396-49.891 C511.999,351.352,489.392,328.968,461.604,328.968z M60.539,200.351c17.887,0,32.441,14.553,32.441,32.442 c0,17.887-14.553,32.441-32.441,32.441c-17.889,0-32.442-14.553-32.442-32.441C28.097,214.904,42.65,200.351,60.539,200.351z M93.27,421.316H27.808V283.354c9.43,6.126,20.672,9.687,32.731,9.687s23.302-3.562,32.731-9.687V421.316z"/> </g>
              </svg>
          </div>
          <div>
            <p class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-400">
              Total Revenue
            </p>
            <p class="text-lg font-semibold text-gray-700 dark:text-gray-200">
              ${{ total_revenue }}
            </p>
          </div>
        </div>
        <!-- Card 2 -->
        <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
          <div class="card-icon p-3 mr-4 text-orange-500 bg-orange-100 rounded-full dark:text-orange-100 dark:bg-orange-500">
              <!-- SVG Path -->
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g id="SVGRepo_bgCarrier" stroke-width="0"/>
              <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
              <g id="SVGRepo_iconCarrier"> <path d="M9.5 13.75C9.5 14.72 10.25 15.5 11.17 15.5H13.05C13.85 15.5 14.5 14.82 14.5 13.97C14.5 13.06 14.1 12.73 13.51 12.52L10.5 11.47C9.91 11.26 9.51001 10.94 9.51001 10.02C9.51001 9.17999 10.16 8.48999 10.96 8.48999H12.84C13.76 8.48999 14.51 9.26999 14.51 10.24" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M12 7.5V16.5" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M17 3V7H21" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M22 2L17 7" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </g>
              </svg>
          </div>
          <div>
            <p class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-400">
              Average Job Cost
            </p>
            <p class="text-lg font-semibold text-gray-700 dark:text-gray-200">
              ${{ average_job_cost }}
            </p>
          </div>
        </div>
      </div>
      <div style="margin-left:-1rem; margin-right:-1rem;" class="sticky-leads-sidebar">
        <div class="" id="productFilterColumn">
          <div class="card mb-3 new-card">
            <div class="card-body">
              <div class="mb-4">
                <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-user"></span>
                  <h5 class="text-1000 mb-0">Client</h5>
                </div><p>{{client.name|title}}</p>
              </div>
              <hr>
              <div class="mb-4">
                <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-envelope-alt">  </span>
                  <h5 class="text-1000 mb-0">Email</h5>
                </div><a href="mailto:shatinon@jeemail.com:">{{client.email}}</a>
              </div>
              <hr>
              <div class="mb-4">
                <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-phone"> </span>
                  <h5 class="text-1000 mb-0">Phone</h5>
                </div><a href="tel:+1234567890">{{client.phone}} </a>
              </div>
              <hr>
              <div class="mb-4">
                <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-user"></span>
                  <h5 class="text-1000 mb-0">Primary Contact</h5>
                </div><p>{{client.contact_name}}</p>
              </div>
              <hr>
              <div class="mb-4">
                <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-star"></span>
                  <h5 class="text-1000 mb-0">Role</h5>
                </div><p>{{client.role|title}}</p>
              </div>
              <hr>
              <div class="mb-4">
                <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-user-location"></span>
                  <h5 class="text-1000 mb-0">Address</h5>
                </div>
                <p class="mb-0 text-800">{{client.address}}</p>
              </div>
              <hr>
              <div class="mb-4">
                <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-clock"></span>
                  <h5 class="text-1000 mb-0">Created</h5>
                </div>
                <p class="mb-0 text-800">{{ object.created_at|date:"F j, Y" }}</p>
              </div>
              <hr>
            </div>
          </div>
        </div>
        <div class="phoenix-offcanvas-backdrop d-lg-none top-0" data-phoenix-backdrop="data-phoenix-backdrop"></div>
      </div>
    </div>

        <div class="col-lg-8">
          <!-- Nav pills -->
          <ul class="nav nav-phoenix-pills mb-5 d-sm-none d-xl-flex" id="clientTabMobile" role="tablist" style="margin-left:-1rem; margin-right:-1rem;padding: 0.125rem;border-radius: 0.625rem;border:none;background-color:#cfe2f0;">
            <li class="nav-item" role="presentation">
                <a class="nav-link cursor-pointer active" data-bs-toggle="tab" data-bs-target="#jobs" role="tab" aria-controls="jobs-mobile" aria-selected="false" style="font-weight:700;">Jobs({{ total_jobs }})</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link cursor-pointer" data-bs-toggle="tab" data-bs-target="#invoices" role="tab" aria-controls="invoices-mobile" aria-selected="false" style="font-weight:700;">Invoices({{ total_invoices }})</a>
            </li>
        </ul>
        <div class="tab-content" id="clientTabContent">
            <div class="tab-pane fade show active" id="jobs" role="tabpanel" aria-labelledby="jobs-tab">
              {% for job in jobs %}
              <div class="card-view" style="margin-left:-1rem; margin-right:-1rem; margin-bottom: 1rem;">
                <a href="{% url 'smeApp:job_detail' job.id %}" class="text-decoration-none text-1000">
                  <div class="card btn-reveal-trigger border-200 gx-0 border-top">
                    <div class="card-body">
                      <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-1 flex-grow-1">{{ job.description|truncatechars:26 }}</h5>
                        {% if job.status == 'quote' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-primary"><span class="badge-label">{{ job.status }}</span></span>
                        {% elif job.status == 'work order' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-warning"><span class="badge-label">{{ job.status }}</span></span>
                        {% elif job.status == 'ongoing' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-info"><span class="badge-label">{{ job.status }}</span></span>
                        {% elif job.status == 'completed' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-success"><span class="badge-label">{{ job.status }}</span></span>
                        {% elif job.status == 'cancelled' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ job.status }}</span></span>
                        {% elif job.status == 'postponed' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-secondary"><span class="badge-label">{{ job.status }}</span></span>
                        {% else %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-light"><span class="badge-label">{{ job.status }}</span></span>
                        {% endif %}
                        <span class="fas fa-chevron-right ms-2"></span>
                      </div>
                      <div class="d-flex justify-content-between align-items-center mt-2">
                        <p class="fs--1 mb-0">{{ job.start_date }}</p>
                        <p class="fs--1 ps-lg-3 border-start-lg border-300 fw-bold mb-0">${{ job.total_cost }}</p>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            {% empty %}
              <p>No jobs found</p>
            {% endfor %}
                </div>
            <div class="tab-pane fade" id="invoices" role="tabpanel" aria-labelledby="invoices-tab">
              <!-- Invoices content goes here -->
              {% for invoice in invoices %}
              <div class="card-view" style="margin-left:-1rem; margin-right:-1rem; margin-bottom: 1rem;">
                <a href="{% url 'smeApp:update_invoice' invoice.pk %}" class="text-decoration-none text-1000">
                  <div class="card btn-reveal-trigger border-200 gx-0 border-top">
                    <div class="card-body">
                      <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-1 flex-grow-1">{{ invoice.invoice_number }}</h5>
                        {% if invoice.payment_status == 'Unpaid' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Partially Paid' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-warning"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Paid' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-success"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Late Payment' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Pending Payment' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-primary"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Overdue' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Not Yet Invoiced' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-secondary"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Refunded' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-info"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% elif invoice.payment_status == 'Cancelled' %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% else %}
                          <span class="badge badge-phoenix fs--2 badge-phoenix-light"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                        {% endif %}
                        <span class="fas fa-chevron-right ms-2"></span>
                      </div>
                      <div class="d-flex justify-content-between align-items-center mt-2">
                        <p class="fs--1 mb-0">{{ invoice.invoice_date }}</p>
                        <p class="fs--1 ps-lg-3 border-start-lg border-300 fw-bold mb-0">${{ invoice.get_total_amount|floatformat:2 }}</p>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              {% empty %}
                <p>No invoices found</p>
              {% endfor %}
              </div>
              </div>
            </div>
          </div>
      </div>
</div>

  <!-- Mobile version -->
  <div class="d-lg-none">
      <!-- Nav pills -->
      <ul class="nav nav-phoenix-pills mb-5 d-sm-none d-xl-flex" id="clientTabMobile" role="tablist" style="margin-left:-1rem; margin-right:-1rem;padding: 0.125rem;border-radius: 0.25rem;border:none;background-color:#cfe2f0;margin-top: -0.8rem;">
        <li class="nav-item" role="presentation">
            <a class="nav-link cursor-pointer active" data-bs-toggle="tab" data-bs-target="#details-mobile" role="tab" aria-controls="details-mobile" aria-selected="true" style="font-weight:700;">Details</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link cursor-pointer" data-bs-toggle="tab" data-bs-target="#jobs-mobile" role="tab" aria-controls="jobs-mobile" aria-selected="false" style="font-weight:700;">Jobs({{ total_jobs }})</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link cursor-pointer" data-bs-toggle="tab" data-bs-target="#invoices-mobile" role="tab" aria-controls="invoices-mobile" aria-selected="false" style="font-weight:700;">Invoices({{ total_invoices }})</a>
        </li>
    </ul>

    <div class="tab-content" id="clientTabContentMobile">
        <div class="tab-pane fade show active" id="details-mobile" role="tabpanel" aria-labelledby="details-mobile">
            <!-- Client Details content goes here -->
            <div class="row g-0 g-md-4 g-xl-6">
            <div class="col-md-5 col-lg-5 col-xl-4">
              <div class="flex justify-between" style="margin-left:-1rem; margin-right:-1rem; margin-bottom:1rem;">
              <!-- Card 1 -->
              <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800 mr-2">
                <div class="card-icon p-3 mr-4 text-green-500 bg-green-100 rounded-full dark:text-green-100 dark:bg-green-500">
                    <!-- SVG Path -->
                    <svg class="w-5 h-5" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511.999 511.999" xml:space="preserve" fill="#000000">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"/>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
                    <g id="SVGRepo_iconCarrier"> <circle style="fill:#aef4d0;" cx="367.369" cy="161.604" r="84.828"/> <g> <path style="fill:#4191b4;" d="M367.367,260.348c-26.374,0-51.169-10.271-69.818-28.919c-5.429-5.429-5.429-14.233,0-19.664 c5.431-5.428,14.232-5.428,19.664,0c27.656,27.656,72.653,27.656,100.31,0c13.398-13.396,20.774-31.207,20.774-50.154 s-7.377-36.759-20.774-50.154c-27.656-27.656-72.653-27.656-100.31,0c-5.431,5.428-14.232,5.428-19.664,0 c-5.429-5.429-5.429-14.233,0-19.664c18.649-18.648,43.444-28.919,69.818-28.919s51.169,10.271,69.818,28.919 c18.648,18.649,28.919,43.444,28.919,69.818s-10.271,51.169-28.919,69.818C418.537,250.077,393.742,260.348,367.367,260.348z"/> <path style="fill:#4191b4;" d="M374.166,155.225v-24.161c9.644,1.691,11.094,7.037,11.312,10.18 c0.056,0.805,0.72,1.428,1.528,1.428h10.534c0.884,0,1.581-0.748,1.535-1.632c-0.684-13.252-9.766-21.778-24.909-23.692v-8.125 c0-0.847-0.687-1.534-1.534-1.534h-10.532c-0.847,0-1.534,0.687-1.534,1.534v8.125c-15.754,1.992-24.951,11.141-24.951,25.325 s9.195,23.332,24.951,25.325v24.161c-9.644-1.691-11.094-7.037-11.312-10.18c-0.056-0.805-0.72-1.428-1.528-1.428h-10.534 c-0.884,0-1.581,0.748-1.535,1.632c0.684,13.252,9.766,21.778,24.909,23.692v8.125c0,0.847,0.687,1.534,1.534,1.534h10.532 c0.847,0,1.534-0.687,1.534-1.534v-8.125c15.754-1.992,24.951-11.141,24.951-25.325 C399.117,166.366,389.922,157.216,374.166,155.225z M360.567,154.28c-11.348-1.99-11.351-9.04-11.351-11.608 c0-2.567,0.003-9.619,11.351-11.608V154.28z M374.166,192.157v-23.217c11.348,1.99,11.351,9.042,11.351,11.608 S385.515,190.168,374.166,192.157z"/> </g> <path style="fill:#aef4d0;" d="M60.539,186.447c25.596,0,46.346,20.75,46.346,46.346s-20.749,46.346-46.346,46.346 c-25.596,0-46.346-20.75-46.346-46.346S34.943,186.447,60.539,186.447H13.904v248.771h93.272V186.447H60.539z"/> <path style="fill:#4191b4;" d="M461.604,328.968H338.148c0.214-1.806,0.335-3.632,0.335-5.478c0-12.394-4.884-24.036-13.816-32.844 L242.851,211c-12.753-12.372-29.611-19.186-47.472-19.186h-74.302v-5.366c0-7.678-6.226-13.904-13.904-13.904H13.904 C6.226,172.545,0,178.771,0,186.449v248.773c0,7.678,6.226,13.904,13.904,13.904h93.27c7.678,0,13.904-6.226,13.904-13.904v-6.471 l178.819-0.031c7.678-0.001,13.902-6.228,13.901-13.907c-0.001-7.678-6.228-13.902-13.907-13.901l-178.814,0.031V219.622h74.302 c10.591,0,20.574,4.027,28.09,11.319l81.735,79.568c3.527,3.479,5.47,8.088,5.47,12.982c0,4.894-1.941,9.503-5.475,12.988 l-0.1,0.099c-7.412,7.309-19.471,7.308-26.88,0l-86.29-85.096c-5.467-5.393-14.272-5.332-19.663,0.138 c-5.392,5.468-5.331,14.271,0.138,19.663l58.498,57.689H175.61c-7.678,0-13.904,6.226-13.904,13.904s6.226,13.904,13.904,13.904 h81.735c0.563,0,1.114-0.043,1.659-0.108c9.05,8.762,20.848,13.152,32.653,13.15c11.761,0,23.52-4.36,32.559-13.061 c0.122,0.003,0.241,0.018,0.363,0.018h137.023c12.455,0,22.588,9.907,22.588,22.085c0,12.177-10.133,22.084-22.588,22.084h-96.172 c-7.678,0-13.904,6.226-13.904,13.904c0,7.678,6.226,13.904,13.904,13.904h96.172c27.788,0,50.396-22.381,50.396-49.891 C511.999,351.352,489.392,328.968,461.604,328.968z M60.539,200.351c17.887,0,32.441,14.553,32.441,32.442 c0,17.887-14.553,32.441-32.441,32.441c-17.889,0-32.442-14.553-32.442-32.441C28.097,214.904,42.65,200.351,60.539,200.351z M93.27,421.316H27.808V283.354c9.43,6.126,20.672,9.687,32.731,9.687s23.302-3.562,32.731-9.687V421.316z"/> </g>
                    </svg>
                </div>
                <div>
                  <p class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-400">
                    Total Revenue
                  </p>
                  <p class="text-lg font-semibold text-gray-700 dark:text-gray-200">
                    ${{ total_revenue|floatformat:2 }}
                  </p>
                </div>
              </div>
              <!-- Card 2 -->
              <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
                <div class="card-icon p-3 mr-4 text-orange-500 bg-orange-100 rounded-full dark:text-orange-100 dark:bg-orange-500">
                    <!-- SVG Path -->
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"/>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
                    <g id="SVGRepo_iconCarrier"> <path d="M9.5 13.75C9.5 14.72 10.25 15.5 11.17 15.5H13.05C13.85 15.5 14.5 14.82 14.5 13.97C14.5 13.06 14.1 12.73 13.51 12.52L10.5 11.47C9.91 11.26 9.51001 10.94 9.51001 10.02C9.51001 9.17999 10.16 8.48999 10.96 8.48999H12.84C13.76 8.48999 14.51 9.26999 14.51 10.24" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M12 7.5V16.5" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M17 3V7H21" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M22 2L17 7" stroke="#3f628d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </g>
                    </svg>
                </div>
                <div>
                  <p class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-400">
                    Average Job Cost
                  </p>
                  <p class="text-lg font-semibold text-gray-700 dark:text-gray-200">
                    ${{ average_job_cost|floatformat:2 }}
                  </p>
                </div>
              </div>
            </div>
            <div style="margin-left:-1rem; margin-right:-1rem;" class="sticky-leads-sidebar">
              <div class="" id="productFilterColumn">
                <div class="card mb-3 new-card">
                  <div class="card-body">
                    <div class="mb-4">
                      <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-user"></span>
                        <h5 class="text-1000 mb-0">Client</h5>
                      </div><p>{{client.name|title}}</p>
                    </div>
                    <hr>
                    <div class="mb-4">
                      <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-envelope-alt">  </span>
                        <h5 class="text-1000 mb-0">Email</h5>
                      </div><a href="mailto:shatinon@jeemail.com:">{{client.email}}</a>
                    </div>
                    <hr>
                    <div class="mb-4">
                      <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-phone"> </span>
                        <h5 class="text-1000 mb-0">Phone</h5>
                      </div><a href="tel:+1234567890">{{client.phone}} </a>
                    </div>
                    <hr>
                    <div class="mb-4">
                      <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-users-alt"></span>
                        <h5 class="text-1000 mb-0">Primary Contact</h5>
                      </div><p>{{client.contact_name}}</p>
                    </div>
                    <hr>
                    <div class="mb-4">
                      <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-star"></span>
                        <h5 class="text-1000 mb-0">Role</h5>
                      </div><p>{{client.role|title}}</p>
                    </div>
                    <hr>
                    <div class="mb-4">
                      <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-user-location"></span>
                        <h5 class="text-1000 mb-0">Address</h5>
                      </div>
                      <p class="mb-0 text-800">{{client.address}}</p>
                    </div>
                    <hr>
                    <div class="mb-4">
                      <div class="d-flex align-items-center mb-1"><span class="me-2 uil uil-clock"></span>
                        <h5 class="text-1000 mb-0">Created</h5>
                      </div>
                      <p class="mb-0 text-800">{{ object.created_at|date:"F j, Y" }}</p>
                    </div>
                    <hr>
                  </div>
                </div>
              </div>
              <div class="phoenix-offcanvas-backdrop d-lg-none top-0" data-phoenix-backdrop="data-phoenix-backdrop"></div>
            </div>
            </div>
            </div>
        </div>
        <div class="tab-pane fade" id="jobs-mobile" role="tabpanel" aria-labelledby="jobs-mobile">
        <!-- Jobs content goes here -->
        {% for job in jobs %}
        <div class="card-view" style="margin-left:-1rem; margin-right:-1rem; margin-bottom: 1rem;">
          <a href="{% url 'smeApp:job_detail' job.id %}" class="text-decoration-none text-1000">
            <div class="card btn-reveal-trigger border-200 gx-0 border-top">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                  <h5 class="mb-1 flex-grow-1">{{ job.description|truncatechars:26 }}</h5>
                  {% if job.status == 'quote' %}
                    <span class="badge badge-phoenix fs--2 badge-phoenix-primary"><span class="badge-label">{{ job.status }}</span></span>
                  {% elif job.status == 'work order' %}
                    <span class="badge badge-phoenix fs--2 badge-phoenix-warning"><span class="badge-label">{{ job.status }}</span></span>
                  {% elif job.status == 'ongoing' %}
                    <span class="badge badge-phoenix fs--2 badge-phoenix-info"><span class="badge-label">{{ job.status }}</span></span>
                  {% elif job.status == 'completed' %}
                    <span class="badge badge-phoenix fs--2 badge-phoenix-success"><span class="badge-label">{{ job.status }}</span></span>
                  {% elif job.status == 'cancelled' %}
                    <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ job.status }}</span></span>
                  {% elif job.status == 'postponed' %}
                    <span class="badge badge-phoenix fs--2 badge-phoenix-secondary"><span class="badge-label">{{ job.status }}</span></span>
                  {% else %}
                    <span class="badge badge-phoenix fs--2 badge-phoenix-light"><span class="badge-label">{{ job.status }}</span></span>
                  {% endif %}
                  <span class="fas fa-chevron-right ms-2"></span>
                </div>
                <div class="d-flex justify-content-between align-items-center mt-2">
                  <p class="fs--1 mb-0">{{ job.start_date }}</p>
                  <p class="fs--1 ps-lg-3 border-start-lg border-300 fw-bold mb-0">${{ job.total_cost }}</p>
                </div>
              </div>
            </div>
          </a>
        </div>
      {% empty %}
        <p>No jobs found</p>
      {% endfor %}
      </div>
      <div class="tab-pane fade" id="invoices-mobile" role="tabpanel" aria-labelledby="invoices-mobile">
      <!-- Invoices content goes here -->
      {% for invoice in invoices %}
      <div class="card-view" style="margin-left:-1rem; margin-right:-1rem; margin-bottom: 1rem;">
        <a href="{% url 'smeApp:update_invoice' invoice.pk %}" class="text-decoration-none text-1000">
          <div class="card btn-reveal-trigger border-200 gx-0 border-top">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-1 flex-grow-1">{{ invoice.invoice_number }}</h5>
                {% if invoice.payment_status == 'Unpaid' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Partially Paid' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-warning"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Paid' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-success"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Late Payment' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Pending Payment' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-primary"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Overdue' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Not Yet Invoiced' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-secondary"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Refunded' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-info"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% elif invoice.payment_status == 'Cancelled' %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-danger"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% else %}
                  <span class="badge badge-phoenix fs--2 badge-phoenix-light"><span class="badge-label">{{ invoice.payment_status }}</span></span>
                {% endif %}
                <span class="fas fa-chevron-right ms-2"></span>
              </div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <p class="fs--1 mb-0">{{ invoice.invoice_date }}</p>
                <p class="fs--1 ps-lg-3 border-start-lg border-300 fw-bold mb-0">${{ invoice.get_total_amount|floatformat:2 }}</p>
              </div>
            </div>
          </div>
        </a>
      </div>
      {% empty %}
        <p>No invoices found</p>
      {% endfor %}
      </div>
      </div>

{% endblock %}
